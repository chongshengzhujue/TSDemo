{"version":3,"sources":["../../../../assets/raphael/assets/raphael/R.group.js"],"names":["Path","require","trasform","style","utils","svg","GroupDefine","extends","cc","Component","properties","selected","default","notify","children","i","ii","length","_dirty","serializable","onLoad","init","ctx","_ccsg","GraphicsNode","node","_sgNode","addChild","parent","showBoundingBox","addPath","path","push","addGroup","group","Group","getWorldBbox","rect","bbox","width","height","rectUnion","update","dt","clear","child","x","y","stroke","Class","defineClass"],"mappings":"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","file":"R.group.js","sourceRoot":"../../../../assets/raphael","sourcesContent":["var Path = require('./R.path');\n\nvar trasform = require('./component/R.transform');\nvar style = require('./component/R.style');\nvar utils = require('./utils/R.utils');\n\n// optional\nvar svg = require('./component/optional/R.svg');\n\nvar GroupDefine = {\n    extends: cc.Component,\n\n    properties: {\n        selected: {\n            default: false,\n            notify: function () {\n                var children = this.children;\n                var selected = this.selected;\n\n                for (var i = 0, ii = children.length; i < ii; i++) {\n                    children[i].selected = selected;\n                }\n            }\n        },\n\n        _dirty: {\n            default: true,\n            serializable: false\n        }\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        this.init();\n\n        if (!this.ctx) {\n            this.ctx = new _ccsg.GraphicsNode();\n            this.node._sgNode.addChild(this.ctx);\n        }\n    },\n\n    init: function (parent) {\n        this.children = [];\n\n        if (parent) {\n            this.parent = parent;\n            this.ctx = parent.ctx;\n        }\n\n        this.showBoundingBox = false;\n    },\n\n    addPath: function () {\n        var path = new Path();\n        path.init(this);\n\n        this.children.push(path);\n        this._dirty = true;\n\n        return path;\n    },\n\n    addGroup: function () {\n        var group = new Group();\n        group.init(this);\n\n        this.children.push(group);\n        this._dirty = true;\n\n        return group;\n    },\n\n    getWorldBbox: function () {\n        var rect;\n        var children = this.children;\n        for (var i = 0, ii = children.length; i < ii; i++) {\n            var bbox = children[i].getWorldBbox();\n            \n            if (bbox.width !== 0 && bbox.height !== 0) {\n                if (!rect) {\n                    rect = children[i].getWorldBbox();\n                }\n                else {\n                    rect = cc.rectUnion(rect, children[i].getWorldBbox());    \n                }\n            }\n        }\n\n        return rect || cc.rect();\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n\n        if (!this._dirty) return;\n\n        if (!this.parent) {\n            this.ctx.clear();\n        }\n\n        var children = this.children;\n        for (var i = 0, ii = children.length; i < ii; i++) {\n            var child = children[i];\n            child._dirty = true;\n            child.update(dt);\n        }\n\n        if (this.showBoundingBox) {\n            var bbox = this.getWorldBbox();\n            this.ctx.rect(bbox.x, bbox.y, bbox.width, bbox.height);\n            this.ctx.stroke();\n        }\n\n        this._dirty = false;\n    },\n};\n\nvar Group = cc.Class(utils.defineClass(GroupDefine, trasform, style, svg));\n"]}