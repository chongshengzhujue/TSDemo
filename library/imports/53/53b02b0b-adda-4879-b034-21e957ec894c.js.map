{"version":3,"sources":["../../../../../../assets/scripts/viewCtrl/base/assets/scripts/viewCtrl/base/BasicViewCtrl.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../../assets/scripts/viewCtrl/base","sourcesContent":["// viewCtrl 基类 ,用于托管view，资源释放管理，\n// 2018.01.09 li.xiao\n\nimport UserComponent from \"./UserComponent\";\n\nlet eventManager = (<any>cc).talefun.EventManager;\nlet LogHelper = (<any>cc).talefun.LogHelper;\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BasicViewCtrl {\n\n    prefabName: string = \"\";\n    rootView: cc.Node = null;\n    isOpen: boolean = false;\n    isInViewStack: boolean = false;\n    logicComponent: UserComponent = null;\n    parentNode: cc.Node = null;\n    parentViewCtrl: BasicViewCtrl = null;\n    subViewCtrlList: BasicViewCtrl[] = [];\n    resCache: {deps:any[],imageCache:any[]} = {deps:[],imageCache:[]};\n    data:any = null;\n    eventCache:any[] = [];\n\n    openView(prefab:cc.Prefab,data:any,parentNode:cc.Node,parentViewCtrl:BasicViewCtrl)\n   {\n       this.data = data;\n       LogHelper.log(\"openView : \" + data);\n       if(!this.isOpen)\n       {\n            this.rootView = cc.instantiate(prefab)\n            this.rootView[\"viewCtrl\"] = this;\n            this.logicComponent = this.rootView.getComponent(this.prefabName + \"Logic\");\n\n            if (parentNode && parentViewCtrl)\n            {\n                parentNode.addChild(this.rootView);\n                parentViewCtrl.addSubViewCtrl(this);\n                this.parentViewCtrl = parentViewCtrl;\n            }\n            else\n            {\n                cc.director.getScene().addChild(this.rootView);\n                (<any>cc).talefun.ViewManager.pushView(this);\n                this.isInViewStack = true; \n            }\n        \n            if(this.logicComponent && this.logicComponent.onEnter)\n            {\n                this.logicComponent.onEnter();\n            }\n\n            this.isOpen = true;\n       }  \n       return this;\n   }\n\n   closeView()\n   {\n       //clear subViewCtrlList\n       var subLen = this.subViewCtrlList.length;\n       for(var i = 0 ; i < subLen; i++)\n       {\n            this.subViewCtrlList[i].closeView();\n       }\n       this.subViewCtrlList.splice(0,subLen);\n\n\n        if (this.rootView && this.rootView instanceof cc.Node)\n        {\n\n            //移除事件\n            this.removeAllEventListeners();\n\n            if(this.logicComponent && this.logicComponent.onExit)\n            {\n                this.logicComponent.onExit();\n            }\n\n            if (this.parentViewCtrl)\n            {\n                this.parentViewCtrl.removeSubViewCtrl(this);\n                this.parentViewCtrl = null;\n            }\n\n            this.rootView.removeFromParent();\n            this.rootView.destroy();\n            this.rootView = null;\n            this.logicComponent = null;\n          \n        } \n        this.isOpen = false;\n        if (this.isInViewStack)\n        {\n            //当界面类型为View时 关闭界面时释放依赖缓存\n            (<any>cc).talefun.ViewManager.releaseDeps(this.resCache.deps);\n            //当界面类型为View时 关闭界面时释放动态image缓存\n            (<any>cc).talefun.ViewManager.releaseImageCache(this.resCache.imageCache);\n\n            (<any>cc).talefun.ViewManager.popView(this);\n        }\n       \n   }\n\n   addSubViewCtrl(viewCtrl:BasicViewCtrl)\n   {\n        if (viewCtrl && this.subViewCtrlList.indexOf(viewCtrl) == -1)\n        {\n            this.subViewCtrlList.push(viewCtrl);\n        }\n   }\n\n   removeSubViewCtrl(viewCtrl:BasicViewCtrl)\n   {\n       if (viewCtrl)\n       {\n            var index = this.subViewCtrlList.indexOf(viewCtrl);\n            if (index !== -1)\n            {\n                this.subViewCtrlList.splice(index,1);\n            }\n       }  \n   }\n\n   isFullScene()\n    {\n        if(this.rootView && this.logicComponent)\n        {\n            LogHelper.log(\"isFullScene : \" + this.logicComponent.isFullScene);\n            return this.logicComponent.isFullScene;\n        }\n        else\n        {\n            return false;\n        }\n    }\n\n    setVisible(isVisible:boolean)\n    {\n        if (this.rootView)\n        {\n            this.rootView.active = isVisible;\n        }\n    }\n\n    addEventListener(eventType:number,callback:any)\n    {\n        if (!this.eventCache)\n        {\n            this.eventCache = [];\n        }\n\n        if (eventType && callback)\n        {\n            var subCache = {eventType : eventType, callback : callback};\n            this.eventCache.push(subCache);\n\n            if (eventManager)\n            {\n                eventManager.addEventListener(eventType,callback);\n            }\n        }\n    }\n\n    dispatchEvent(eventType:number,params:any)\n    {\n        if(eventManager)\n        {\n            eventManager.dispatchEvent(eventType,params);\n        }\n    }\n\n    removeEventListener(eventType:number,callback:any)\n    {\n        if (eventType && callback)\n        {\n            if (eventManager)\n            {\n                eventManager.removeEventListener(eventType,callback);\n            }\n        }\n    }\n\n    removeAllEventListeners()\n    {\n        if (this.eventCache)\n        {\n            for(var i = 0 ; i < this.eventCache.length; i++)\n            {\n                var subCache = this.eventCache[i];\n                eventManager.removeEventListener(subCache.eventType,subCache.callback);\n                delete subCache.eventType;\n                delete subCache.callback;\n            }\n            this.eventCache.splice(i,this.eventCache.length);\n        }\n    }\n\n    retainImageCache(imagePath:any)\n    {\n        if (imagePath)\n        {\n            var index = this.resCache.imageCache.indexOf(imagePath);\n            if (index == -1)\n            {\n                this.resCache.imageCache.push(imagePath);\n                (<any>cc).talefun.ViewManager.retainImageCache(imagePath);\n            }\n        }\n    }\n\n    releaseImageCacheInOrder(order:any)\n    {\n        if (order)\n        {\n            if (order instanceof Array)\n            {\n                var len = order.length;\n                for(var i = 0; i < len; i++)\n                {\n                    var subPath = order[i];\n                    this.releaseImageCacheInOrder(subPath);\n                }\n            }\n            else\n            {\n                var index = this.resCache.imageCache.indexOf(order);\n                if (index !== -1)\n                {\n                    this.resCache.imageCache.splice(index,1);\n                    (<any>cc).talefun.ViewManager.releaseImageCache(order);\n                }\n            }\n        }\n    }\n\n    setSpriteFrame(sprite:cc.Sprite,resPath:string,frameName:string)\n    {\n        if(sprite && sprite instanceof cc.Sprite && resPath && frameName)\n        {\n            cc.loader.loadRes(resPath,(<any>cc).SpriteAtlas,function(error,atlas){\n                if(error)\n                {\n                    LogHelper.log(\"setSpriteFrame Error: \" + error);\n                }\n                else\n                {\n                    this.retainImageCache(resPath);\n\n                    if(cc.isValid(sprite))\n                    {\n                        var frame = atlas.getSpriteFrame(frameName);\n                        if (frame)\n                        {\n                            sprite.spriteFrame = frame; \n                        }\n                    }\n                }\n            }.bind(this))\n        }\n    }\n\n    setSpriteTexture(sprite:cc.Sprite,resPath:string)\n    {\n        if(sprite && sprite instanceof cc.Sprite && resPath)\n        {\n            cc.loader.loadRes(resPath,cc.SpriteFrame,function(error,spriteFrame){\n                if(error)\n                {\n                    LogHelper.log(\"setSpriteFrame Error: \" + error);\n                }\n                else\n                {\n                    this.retainImageCache(resPath);\n                    if(cc.isValid(sprite))\n                    {\n                        sprite.spriteFrame = spriteFrame; \n                    }\n                }\n            }.bind(this))\n        }\n    }\n\n    setSpriteAutoByName(sprite:cc.Sprite,frameName:string)\n    {\n        if(sprite == null || sprite == undefined)\n        {\n            return;\n        }\n        let UIResMap = (<any>cc).talefun.UIResMap;\n        let resInfo = UIResMap.getResInfo(frameName);\n        if(resInfo !== null && resInfo !== undefined)\n        {\n            if(resInfo.plistPath)\n            {\n                this.setSpriteFrame(sprite,resInfo.plistPath,frameName);\n            }\n            else if(resInfo.localPath)\n            {\n                this.setSpriteTexture(sprite,resInfo.localPath);\n            }\n        }\n    }\n\n    setBtnFrame(btn:cc.Button,resPath:string,frameName:string)\n    {\n        if(btn && btn instanceof cc.Button && resPath && frameName)\n        {\n            cc.loader.loadRes(resPath,(<any>cc).SpriteAtlas,function(error,atlas){\n                if(error)\n                {\n                    LogHelper.log(\"setSpriteFrame Error: \" + error);\n                }\n                else\n                {\n                    this.retainImageCache(resPath);\n                    if(cc.isValid(btn))\n                    {\n                        var frame = atlas.getSpriteFrame(frameName);\n                        var sprite = (<any>btn)._sprite;\n                        if (frame && sprite)\n                        {\n                            var transition = btn.transition\n                            if (transition == 2)  //sprite\n                            {\n                                btn.normalSprite = frame;\n                                btn.pressedSprite = frame;\n                                btn.hoverSprite = frame;\n                                btn.disabledSprite = frame;\n                            }\n                            else\n                            {\n                                sprite.spriteFrame = frame; \n                            }\n                            \n                        }\n                    }\n                }\n            }.bind(this))\n        }\n    }\n\n    setBtnTexture(btn:cc.Button, resPath: string)\n    {\n        if(btn && btn instanceof cc.Button && resPath)\n        {\n            cc.loader.loadRes(resPath,cc.SpriteFrame,function(error,spriteFrame){\n                if(error)\n                {\n                    LogHelper.log(\"setSpriteFrame Error: \" + error);\n                }\n                else\n                {\n                    this.retainImageCache(resPath);\n                    if(cc.isValid(btn))\n                    {\n                        var frame = spriteFrame;\n                        var sprite = (<any>btn)._sprite;\n                        if (frame && sprite)\n                        {\n                            var transition = btn.transition\n                            if (transition == 2)  //sprite\n                            {\n                                btn.normalSprite = frame;\n                                btn.pressedSprite = frame;\n                                btn.hoverSprite = frame;\n                                btn.disabledSprite = frame;\n                            }\n                            else\n                            {\n                                sprite.spriteFrame = frame; \n                            }\n                            \n                        } \n                    }\n                }\n            }.bind(this))\n        }\n    }\n\n    setBtnFrameAutoByName(btn:cc.Button,frameName:string)\n    {\n        if(btn == null || btn == undefined)\n        {\n            return;\n        }\n        let UIResMap = (<any>cc).talefun.UIResMap;\n        let resInfo = UIResMap.getResInfo(frameName);\n        if(resInfo !== null && resInfo !== undefined)\n        {\n            if(resInfo.plistPath)\n            {\n                this.setBtnFrame(btn,resInfo.plistPath,frameName);\n            }\n            else if(resInfo.localPath)\n            {\n                this.setBtnTexture(btn,resInfo.localPath);\n            }\n        }\n    }\n}\n"]}