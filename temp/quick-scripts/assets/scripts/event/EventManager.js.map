{"version":3,"sources":["EventManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/scripts/event","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class EventManager {\n\n    static _instance:EventManager = null; \n\n    eventCache:any = null;\n\n    constructor()\n   {\n        this.eventCache = {};\n   }\n\n   static getInstance():EventManager\n   {\n       if(EventManager._instance == null)\n       {\n            EventManager._instance = new EventManager();\n       }\n       return EventManager._instance;\n   }\n\n   addEventListener(eventType:number,callback:any)\n   {\n        if (eventType && callback)\n        {\n            var hadSame = false;\n            var subCache = this.eventCache[eventType] || [];\n\n            for(var i = 0; i < subCache.length; i++)\n            {\n                if (subCache[i] === callback)\n                {\n                    hadSame = true;\n                    break;\n                }\n            }\n\n            if (!hadSame)\n            {\n                subCache.push(callback);\n            }\n\n\n            this.eventCache[eventType] = subCache;\n        }\n   }\n\n   removeEventListener(eventType:number,callback:any)\n   {\n        if (eventType && callback)\n        {\n            var subCache = this.eventCache[eventType];\n            if (subCache)\n            {\n                for(var i = 0; i< subCache.length; i++ )\n                {\n                    if(subCache[i] === callback)\n                    {\n                        subCache.splice(i,1);\n                        break;\n                    }\n                }\n            }\n        }\n   }\n\n   dispatchEvent(eventType:number,params:any)\n   {\n        if (eventType)\n        {\n            var subCache = this.eventCache[eventType];\n            if (subCache)\n            {\n                for(var i = 0; i < subCache.length; i++)\n                {\n                    var callback = subCache[i]\n                    callback(eventType,params);\n                }\n            }\n        }\n   }\n\n    // update (dt) {},\n}\n"]}