{"version":3,"sources":["NetLoadingViewLogic.ts"],"names":[],"mappings":";;;;;AAAA,yDAAoD;AACpD,mDAA8C;AAC9C,+DAA0D;AAI1D,oBAAoB;AACpB,2EAA2E;AAC3E,gHAAgH;AAChH,mBAAmB;AACnB,qFAAqF;AACrF,0HAA0H;AAC1H,8BAA8B;AAC9B,qFAAqF;AACrF,0HAA0H;AAC1H,IAAI,OAAO,GAAS,EAAG,CAAC,OAAO,CAAC;AAE1B,IAAA,kBAAmC,EAAlC,oBAAO,EAAE,sBAAQ,CAAkB;AAE1C;IAAiD,uCAAY;IAA7D;;IA+BA,CAAC;IA3BG,oCAAM,GAAN;QAEI,IAAI,CAAC,eAAe,EAAE,CAAC;QACvB,sBAAY,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,mBAAS,CAAC,aAAa,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACtG,sBAAY,CAAC,WAAW,EAAE,CAAC,gBAAgB,CAAC,mBAAS,CAAC,gBAAgB,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACzG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;IACtC,CAAC;IAEO,6CAAe,GAAvB;QACI,IAAI,cAAc,GAAG,wBAAc,CAAC,WAAW,EAAE,CAAC;QAClD,IAAI,MAAM,GAAG,cAAc,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;QAEzD,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;QAE7B,EAAE,CAAC,GAAG,CAAC,+BAA+B,GAAG,MAAM,CAAC,CAAA;IACpD,CAAC;IAEO,yCAAW,GAAnB,UAAoB,SAAkB;QAClC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC;QAE7B,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;YACZ,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,cAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC3E,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,cAAW,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QAC5E,CAAC;IACL,CAAC;IA9BgB,mBAAmB;QADvC,OAAO;OACa,mBAAmB,CA+BvC;IAAD,0BAAC;CA/BD,AA+BC,CA/BgD,EAAE,CAAC,SAAS,GA+B5D;kBA/BoB,mBAAmB","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\viewCtrl\\TestTableView","sourcesContent":["import EventManager from \"../../event/EventManager\";\r\nimport EventType from \"../../event/EventType\";\r\nimport NetworkManager from \"../../network/NetworkManager\";\r\n\r\n\r\n\r\n// Learn TypeScript:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/typescript.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/typescript/index.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\r\nlet talefun = (<any>cc).talefun;\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n@ccclass\r\nexport default class NetLoadingViewLogic extends cc.Component {\r\n\r\n\r\n\r\n    onLoad()\r\n    {\r\n        this._checkIsWaiting();\r\n        EventManager.getInstance().addEventListener(EventType.NETWORK_BEGIN, this._checkIsWaiting.bind(this));\r\n        EventManager.getInstance().addEventListener(EventType.NETWORK_COMPLETE, this._checkIsWaiting.bind(this));\r\n        cc.game.addPersistRootNode(this.node);\r\n        this.node.setLocalZOrder(1000000);\r\n    }\r\n\r\n    private _checkIsWaiting() {\r\n        let networkManager = NetworkManager.getInstance();\r\n        let length = networkManager.httpClient.getQueueWaitLen();\r\n\r\n        this._setVisible(length > 0);\r\n        \r\n        cc.log(\"=======================length\" + length)\r\n    }\r\n    \r\n    private _setVisible(isVisible: boolean) {\r\n        this.node.active = isVisible;\r\n\r\n        if (isVisible) {\r\n            this.node.on(cc.Node.EventType.TOUCH_START, (function(){}).bind(this));\r\n        } else {\r\n            this.node.off(cc.Node.EventType.TOUCH_START, (function(){}).bind(this));\r\n        }\r\n    }\r\n}\r\n"]}