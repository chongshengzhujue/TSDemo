{"version":3,"sources":["R.dash.js"],"names":["sqrt","Math","drawDashPoints","points","ctx","dashArray","dashOffset","transform","lastx","lasty","dx","dy","totalLength","length","dashLength","dashIndex","from","drawLength","to","x1","y1","x","y","i","l","difLength","p","cc","pointApplyAffineTransform","moveTo","lineTo","module","exports"],"mappings":"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","file":"R.dash.js","sourceRoot":"../../../../../assets/raphael/utils","sourcesContent":["var sqrt = Math.sqrt;\n\nfunction drawDashPoints (points, ctx, dashArray, dashOffset, transform) {\n    var lastx = points[0], \n        lasty = points[1];\n\n    var dx, dy;\n\n    var totalLength = 0;\n    var length = 0;\n\n    var dashLength = dashArray.length;\n    var dashIndex = 0;\n\n    var from = dashOffset;\n    var drawLength = dashArray[dashIndex];\n    var to = dashOffset + drawLength;\n\n    var x1,y1;\n    var x, y;\n\n    for (var i = 0, l = points.length / 2; i < l; i++) {\n        x = points[i * 2];\n        y = points[i * 2 + 1];\n\n        if (i !== 0) {\n            dx = x - lastx;\n            dy = y - lasty;\n\n            length = sqrt(dx*dx + dy*dy);\n\n            if (!x1) x1 = lastx;\n            if (!y1) y1 = lasty;\n\n            while (length > 0) {\n                if (totalLength + length < from) {\n                    totalLength += length;\n                    length = 0;\n                    \n                    x1 = x;\n                    y1 = y;\n\n                    continue;\n                }\n\n                if (totalLength <= from) {\n                    var difLength = from - totalLength;\n                    var p = difLength / length;\n\n                    x1 = x1 + p * (x - x1);\n                    y1 = y1 + p * (y - y1);\n\n                    if (transform) {\n                        var p = cc.pointApplyAffineTransform(x1, y1, transform);\n                        ctx.moveTo(p.x, p.y);    \n                    }\n                    else {\n                        ctx.moveTo(x1, y1);\n                    }\n\n                    length -= difLength;\n                    totalLength += difLength;\n                }\n                \n                if ((totalLength + length) < to) {\n                    x1 = x;\n                    y1 = y;\n\n                    if (transform) {\n                        var p = cc.pointApplyAffineTransform(x1, y1, transform);\n                        ctx.lineTo(p.x, p.y);    \n                    }\n                    else {\n                        ctx.lineTo(x1, y1);\n                    }\n\n                    totalLength += length;\n                    length = 0;\n                }\n                else if ((totalLength + length) >= to) {\n                    var difLength = to - totalLength;\n                    var p = difLength / length;\n\n                    x1 = x1 + p * (x - x1);\n                    y1 = y1 + p * (y - y1);\n\n                    if (transform) {\n                        var p = cc.pointApplyAffineTransform(x1, y1, transform);\n                        ctx.lineTo(p.x, p.y);    \n                    }\n                    else {\n                        ctx.lineTo(x1, y1);\n                    }\n\n                    length -= difLength;\n                    totalLength += difLength;\n\n                    from = to + dashArray[++dashIndex % dashLength];\n                    to = from + dashArray[++dashIndex % dashLength];\n                }\n            }\n        }\n\n        lastx = x;\n        lasty = y;\n    }   \n}\n\nmodule.exports = {\n    drawDashPoints: drawDashPoints\n};\n"]}