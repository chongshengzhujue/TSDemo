{"version":3,"sources":["R.animate.js"],"names":["module","exports","animate","pathString","pathString2","duration","animating","pathes","R","utils","path2curve","fromPath","toPath","diff","i","ii","length","j","jj","_time","_duration","_animateDiff","_animating","_fromPath","_toPath","_stepAnimate","time","pos","now","_dirty","_commands","_updateAnimate","dt"],"mappings":";;;;;;AAAAA,OAAOC,OAAP,GAAiB;;AAEb;AACAC,aAAS,iBAAUC,UAAV,EAAsBC,WAAtB,EAAmCC,QAAnC,EAA6CC,SAA7C,EAAwD;AAC7D,YAAIC,SAASC,EAAEC,KAAF,CAAQC,UAAR,CAAmBP,UAAnB,EAA+BC,WAA/B,CAAb;AAAA,YACIO,WAAWJ,OAAO,CAAP,CADf;AAAA,YAEIK,SAASL,OAAO,CAAP,CAFb;;AAIA,YAAIM,OAAO,EAAX;AACA,aAAK,IAAIC,IAAI,CAAR,EAAWC,KAAKJ,SAASK,MAA9B,EAAsCF,IAAIC,EAA1C,EAA8CD,GAA9C,EAAmD;AAC/CD,iBAAKC,CAAL,IAAU,CAAC,CAAD,CAAV;AACA,iBAAK,IAAIG,IAAI,CAAR,EAAWC,KAAKP,SAASG,CAAT,EAAYE,MAAjC,EAAyCC,IAAIC,EAA7C,EAAiDD,GAAjD,EAAsD;AAClDJ,qBAAKC,CAAL,EAAQG,CAAR,IAAa,CAACL,OAAOE,CAAP,EAAUG,CAAV,IAAeN,SAASG,CAAT,EAAYG,CAAZ,CAAhB,IAAkCZ,QAA/C;AACH;AACJ;;AAED,aAAKc,KAAL,GAAa,CAAb;AACA,aAAKC,SAAL,GAAiBf,QAAjB;;AAEA,aAAKgB,YAAL,GAAoBR,IAApB;AACA,aAAKS,UAAL,GAAkB,OAAOhB,SAAP,KAAqB,WAArB,GAAmC,IAAnC,GAA0CA,SAA5D;;AAEA,aAAKiB,SAAL,GAAiBZ,QAAjB;AACA,aAAKa,OAAL,GAAeZ,MAAf;;AAEA,eAAOC,IAAP;AACH,KA1BY;;AA4BbY,kBAAc,sBAAUC,IAAV,EAAgB;AAC1B,YAAIb,OAAO,KAAKQ,YAAhB;AACA,YAAIhB,WAAW,KAAKe,SAApB;AACA,YAAIT,WAAW,KAAKY,SAApB;;AAEA,YAAII,MAAMD,OAAOrB,QAAjB;;AAEA,YAAIsB,MAAM,CAAV,EAAaA,MAAM,CAAN;;AAEb,YAAIC,MAAM,EAAV;AACA,aAAK,IAAId,IAAI,CAAR,EAAWC,KAAKJ,SAASK,MAA9B,EAAsCF,IAAIC,EAA1C,EAA8CD,GAA9C,EAAmD;AAC/Cc,gBAAId,CAAJ,IAAS,CAACH,SAASG,CAAT,EAAY,CAAZ,CAAD,CAAT;AACA,iBAAK,IAAIG,IAAI,CAAR,EAAWC,KAAKP,SAASG,CAAT,EAAYE,MAAjC,EAAyCC,IAAIC,EAA7C,EAAiDD,GAAjD,EAAsD;AAClDW,oBAAId,CAAJ,EAAOG,CAAP,IAAY,CAACN,SAASG,CAAT,EAAYG,CAAZ,CAAD,GAAkBU,MAAMtB,QAAN,GAAiBQ,KAAKC,CAAL,EAAQG,CAAR,CAA/C;AACH;AACJ;;AAED,aAAKY,MAAL,GAAc,IAAd;AACA,aAAKC,SAAL,GAAiBF,GAAjB;;AAEA,YAAID,OAAO,CAAX,EAAc;AACV,iBAAKL,UAAL,GAAkB,KAAlB;AACA,iBAAKC,SAAL,GAAiB,IAAjB;AACA,iBAAKC,OAAL,GAAe,IAAf;AACH;AACJ,KArDY;;AAuDbO,oBAAgB,wBAAUC,EAAV,EAAc;AAC1B,YAAI,KAAKV,UAAT,EAAqB;AACjB,iBAAKH,KAAL,IAAca,EAAd;AACA,iBAAKP,YAAL,CAAkB,KAAKN,KAAvB;AACH;AACJ;AA5DY,CAAjB","file":"R.animate.js","sourceRoot":"../../../../../../assets/raphael/component/optional","sourcesContent":["module.exports = {\n\n    ////////////////////////////////////////////////////\n    animate: function (pathString, pathString2, duration, animating) {\n        var pathes = R.utils.path2curve(pathString, pathString2),\n            fromPath = pathes[0],\n            toPath = pathes[1];\n\n        var diff = [];\n        for (var i = 0, ii = fromPath.length; i < ii; i++) {\n            diff[i] = [0];\n            for (var j = 1, jj = fromPath[i].length; j < jj; j++) {\n                diff[i][j] = (toPath[i][j] - fromPath[i][j]) / duration;\n            }\n        }\n\n        this._time = 0;\n        this._duration = duration;\n\n        this._animateDiff = diff;\n        this._animating = typeof animating === 'undefined' ? true : animating;\n\n        this._fromPath = fromPath;\n        this._toPath = toPath;\n\n        return diff;\n    },\n\n    _stepAnimate: function (time) {\n        var diff = this._animateDiff;\n        var duration = this._duration;\n        var fromPath = this._fromPath;\n\n        var pos = time / duration;\n\n        if (pos > 1) pos = 1;\n\n        var now = [];\n        for (var i = 0, ii = fromPath.length; i < ii; i++) {\n            now[i] = [fromPath[i][0]];\n            for (var j = 1, jj = fromPath[i].length; j < jj; j++) {\n                now[i][j] = +fromPath[i][j] + pos * duration * diff[i][j];\n            }\n        }\n\n        this._dirty = true;\n        this._commands = now;\n\n        if (pos >= 1) {\n            this._animating = false;\n            this._fromPath = null;\n            this._toPath = null;\n        }\n    },\n\n    _updateAnimate: function (dt) {\n        if (this._animating) {\n            this._time += dt;\n            this._stepAnimate(this._time);\n        }\n    }\n};\n"]}